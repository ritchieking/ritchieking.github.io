var data = [{"Link":"http://qz.com/37639/check-your-us-tax-rate-for-2012-and-every-year-since-1913/","Category":"interactives","hed":"Check your US tax rate for 2012—and every year since 1913","pub":"Quartz","date":"12.19.12","img":"Screen Shot 2013-11-02 at 8.58.09 PM"},
{"Link":"http://qz.com/31208/china-is-the-new-economic-superpower-in-the-eyes-of-the-world/","Category":"interactives","hed":"China is the new economic superpower in the eyes of the world","pub":"Quartz","date":"11.28.12","img":"Screen Shot 2013-11-02 at 8.59.46 PM"},
{"Link":"http://qz.com/88562/mapping-chinese-food-scandals-on-new-art-from-ai-weiwei/","Category":"interactives","hed":"Mapping Chinese food scandals on new art from Ai Weiwei","pub":"Quartz","date":"05.29.13","img":"Screen Shot 2013-11-02 at 9.00.45 PM"},
{"Link":"http://data.qz.com/2013/explore-googles-next-headquarters/","Category":"interactives","hed":"Explore Google’s next headquarters","pub":"Quartz","date":"02.26.13","img":"Screen Shot 2013-11-02 at 9.01.31 PM"},
{"Link":"http://data.qz.com/bitcoin/","Category":"interactives","hed":"Bitcoin dashboard","pub":"Quartz","date":"","img":"Screen Shot 2013-11-02 at 9.02.12 PM"},
{"Link":"http://qz.com/114174/city-of-london-halts-recycling-bins-tracking-phones-of-passers-by/","Category":"maps","hed":"City of London halts recycling bins tracking phones of passers-by","pub":"Quartz","date":"08.12.13","img":"Screen Shot 2013-11-02 at 9.03.43 PM"},
{"Link":"http://qz.com/138719/why-tech-companies-cant-get-office-space-in-london-even-though-landlords-are-desperate-to-have-them/","Category":"maps","hed":"Why tech companies can’t get office space in London—even though landlords are desperate to have them","pub":"Quartz","date":"11.01.13","img":"Screen Shot 2013-11-02 at 9.04.48 PM"},
{"Link":"http://qz.com/142199/the-us-needs-to-retire-daylight-savings-and-just-have-two-time-zones-one-hour-apart/","Category":"maps","hed":"The US needs to retire daylight savings and just have two time zones—one hour apart","pub":"Quartz","date":"11.01.13","img":"Screen Shot 2013-11-02 at 9.09.46 PM"},
{"Link":"http://qz.com/100562/the-eu-just-gained-850-miles-of-borderland-and-a-new-1100-mile-coast/","Category":"maps","hed":"The EU just gained 850 miles of borderland and a new 1,100-mile coast","pub":"Quartz","date":"07.03.13","img":"Screen Shot 2013-11-02 at 9.15.37 PM"},
{"Link":"http://qz.com/126651/the-line-for-new-iphones-vs-the-line-for-cronuts/","Category":"maps","hed":"The line for new iPhones vs. the line for cronuts","pub":"Quartz","date":"09.20.13","img":"Screen Shot 2013-11-02 at 9.20.09 PM"},
{"Link":"http://qz.com/109052/why-new-yorks-ban-on-the-illegal-shark-fin-trade-may-do-nothing-to-reduce-it/","Category":"maps","hed":"New York’s ban on the illegal shark-fin trade won’t do much to protect sharks","pub":"Quartz","date":"08.01.13","img":"Screen Shot 2013-11-02 at 9.21.55 PM"},
{"Link":"http://qz.com/3416/five-ways-a-new-age-of-cheap-energy-could-shift-the-power-balance-on-the-planet-2/","Category":"maps","hed":"Five ways a new age of cheap energy could shift the power balance on the planet","pub":"Quartz","date":"09.24.12","img":"Screen Shot 2013-11-02 at 9.24.13 PM"},
{"Link":"http://qz.com/133251/jellyfish-are-taking-over-the-seas-and-it-might-be-too-late-to-stop-them/","Category":"maps","hed":"Jellyfish are taking over the seas, and it might be too late to stop them","pub":"Quartz","date":"10.15.13","img":"Screen Shot 2013-11-02 at 9.26.29 PM"},
{"Link":"http://qz.com/136664/there-could-be-slaves-in-the-supply-chain-of-your-chocolate-smartphone-and-sushi/","Category":"maps","hed":"There could be slaves in the supply chain of your chocolate, smartphone and sushi","pub":"Quartz","date":"10.19.13","img":"Screen Shot 2013-11-02 at 9.31.47 PM"},
{"Link":"http://qz.com/131210/spains-been-at-least-an-hour-behind-since-world-war-ii-and-it-shows/","Category":"maps","hed":"Spain’s been at least an hour behind since World War II, and it shows","pub":"Quartz","date":"10.03.13","img":"Screen Shot 2013-11-02 at 9.33.35 PM"},
{"Link":"http://qz.com/128987/how-to-map-wealth-in-africa-using-nothing-but-mobile-phone-minutes/","Category":"maps","hed":"How to map wealth in Africa using nothing but mobile-phone minutes","pub":"Quartz","date":"09.27.13","img":"Screen Shot 2013-11-02 at 9.41.27 PM"},
{"Link":"http://qz.com/126322/the-10-cities-most-threatened-by-a-damaging-natural-disaster/","Category":"maps","hed":"The 10 cities most threatened by a damaging natural disaster","pub":"Quartz","date":"09.20.13","img":"Screen Shot 2013-11-02 at 9.42.49 PM"},
{"Link":"http://qz.com/107949/the-most-expensive-city-in-the-world-to-be-a-foreigner-is-not-what-you-think/","Category":"maps","hed":"The most expensive city in the world to be a foreigner is not what you think","pub":"Quartz","date":"07.24.13","img":"Screen Shot 2013-11-02 at 10.11.38 PM"},
{"Link":"http://qz.com/76619/the-boston-manhunt-from-start-to-finish-how-and-where-it-played-out/","Category":"maps","hed":"The Boston manhunt from start to finish: how and where it played out","pub":"Quartz","date":"04.20.13","img":"Screen Shot 2013-11-02 at 10.14.08 PM"},
{"Link":"http://qz.com/134810/when-people-use-their-smartphones-and-tablets-in-charts/","Category":"charts","hed":"When people use their smartphones and tablets, in charts","pub":"Quartz","date":"10.14.23","img":"Screen Shot 2013-11-02 at 10.33.21 PM"},
{"Link":"http://qz.com/131429/how-upstart-red-bull-racing-came-to-dominate-formula-1-with-superfast-internet-and-tons-of-data/","Category":"charts","hed":"How an upstart came to dominate Formula 1 with superfast internet and tons of data","pub":"Quartz","date":"10.04.13","img":"Screen Shot 2013-11-02 at 10.34.52 PM"},
{"Link":"http://qz.com/126804/americas-top-colleges-are-feeding-the-rich-and-keeping-out-the-poor/","Category":"charts","hed":"America’s top colleges are feeding the rich and keeping out the poor","pub":"Quartz","date":"09.23.13","img":"Screen Shot 2013-11-02 at 10.37.59 PM"},
{"Link":"http://qz.com/125692/more-american-children-have-health-coverage-than-ever-before-for-everyone-else-its-gotten-worse/","Category":"charts","hed":"More American children have health coverage than ever before. For everyone else, it’s gotten worse","pub":"Quartz","date":"09.18.13","img":"Screen Shot 2013-11-02 at 10.39.52 PM"},
{"Link":"http://qz.com/124935/american-incomes-are-down-8-3-since-2007/","Category":"charts","hed":"American incomes are down 8.3% since 2007","pub":"Quartz","date":"09.17.13","img":"Screen Shot 2013-11-02 at 10.41.25 PM"},
{"Link":"http://qz.com/138150/the-us-jobs-report-for-september-in-two-simple-charts/","Category":"charts","hed":"The US jobs report for September in two simple charts","pub":"Quartz","date":"10.22.13","img":"Screen Shot 2013-11-02 at 10.48.56 PM"},
{"Link":"http://qz.com/115121/americans-are-starting-to-cut-the-cable-tv-cord-and-heres-what-it-looks-like/","Category":"charts","hed":"Americans are starting to cut the cable TV cord, and here’s what it looks like","pub":"Quartz","date":"08.14.13","img":"Screen Shot 2013-11-02 at 10.50.22 PM"},
{"Link":"http://qz.com/110911/america-imports-three-times-more-russian-crab-than-vodka-and-other-items-that-make-more-sense-to-boycott-than-stoli/","Category":"charts","hed":"America imports three times more Russian crab than vodka, and other items that make more sense to boycott than Stoli","pub":"Quartz","date":"08.03.13","img":"Screen Shot 2013-11-02 at 10.53.32 PM"},
{"Link":"http://qz.com/107351/apples-35-billion-quarter-in-three-charts/","Category":"charts","hed":"Apple’s $35 billion quarter in three charts","pub":"Quartz","date":"07.23.13","img":"Screen Shot 2013-11-02 at 10.55.33 PM"},
{"Link":"http://qz.com/140576/how-to-fix-global-warming-before-its-too-late/","Category":"charts","hed":"How to fix global warming before it’s too late","pub":"Quartz","date":"11.10.13","img":"Screen Shot 2013-11-12 at 11.51.28 PM"},
{"Link":"http://qz.com/96521/what-america-will-look-like-with-immigration-reform-and-without-it/","Category":"charts","hed":"What America will look like with immigration reform—and without it","pub":"Quartz","date":"06.21.13","img":"Screen Shot 2013-11-12 at 11.55.39 PM"},
{"Link":"http://qz.com/79764/going-to-a-more-expensive-college-is-worth-it-for-the-most-part/","Category":"charts","hed":"College’s return on investment: Is it worth going to an expensive school?","pub":"Quartz","date":"05.02.13","img":"Screen Shot 2013-11-12 at 11.59.57 PM"},
{"Link":"http://qz.com/33404/brazils-growth-is-a-foothill-next-to-the-soaring-peaks-of-other-brics/","Category":"charts","hed":"Brazil’s growth is a foothill next to the soaring peaks of other BRICs","pub":"Quartz","date":"12.03.13","img":"Screen Shot 2013-11-13 at 12.06.56 AM"},
{"Link":"http://www.nytimes.com/interactive/2012/02/04/sports/football/most-mentioned-players-on-espn.html?scp=19&sq=%22ritchie%20s.%20king%22&st=cse&_r=0","Category":"charts","hed":"The N.F.L. Players Mentioned Most on “SportsCenter”","pub":"New York Times","date":"02.04.12","img":"Screen Shot 2013-11-13 at 12.15.24 AM"},
{"Link":"http://www.nytimes.com/interactive/2012/03/01/realestate/manhattans-population-density-past-and-present.html?scp=22&sq=%22ritchie%20s.%20king%22&st=cse","Category":"diagrams","hed":"Manhattan’s Population Density, Past and Present","pub":"New York Times","date":"03.01.12","img":"Screen Shot 2013-11-13 at 12.17.24 AM"},
{"Link":"http://qz.com/76047/all-the-paths-to-us-citizenship-in-the-senates-immigration-bill-visualized/","Category":"diagrams","hed":"All the paths to US citizenship in the Senate’s immigration bill, visualized","pub":"Quartz","date":"04.18.13","img":"Screen Shot 2013-11-13 at 12.26.30 AM"},
{"Link":"http://qz.com/70866/its-hard-to-explain-what-abenomics-is-so-we-drew-you-a-picture/","Category":"diagrams","hed":"It’s hard to explain what Abenomics is, so we drew you a picture","pub":"Quartz","date":"04.04.13","img":"Screen Shot 2013-11-13 at 12.27.53 AM"},
{"Link":"http://qz.com/97918/the-family-tree-of-qatars-new-emir-the-fourth-oldest-son-who-has-23-brothers-and-sisters/","Category":"diagrams","hed":"The family tree of Qatar’s new emir, the fourth-oldest son, who has 23 brothers and sisters","pub":"Quartz","date":"06.26.13","img":"Screen Shot 2013-11-13 at 12.32.05 AM"},
{"Link":"http://qz.com/87989/at-the-altar-of-the-big-green-egg-how-a-product-becomes-a-cult/","Category":"writing","hed":"At the altar of the Big Green Egg: How a product becomes a cult","pub":"Quartz","date":"05.24.13","img":"Screen Shot 2013-11-13 at 12.36.49 AM"},
{"Link":"http://www.nytimes.com/2011/11/29/health/a-closer-look-at-teeth-may-mean-more-fillings-by-dentists.html?scp=6&sq=%22ritchie%20s.%20king%22&st=cse","Category":"writing","hed":"A Closer Look at Teeth May Mean More Fillings","pub":"New York Times","date":"11.28.11","img":"Screen Shot 2013-11-13 at 12.41.45 AM"},
{"Link":"http://www.nytimes.com/interactive/2012/02/04/sports/football/a-compilation-of-sportscenter-cliches.html?scp=23&sq=%22ritchie%20s.%20king%22&st=cse","Category":"writing","hed":"A Compilation of ESPN ‘SportsCenter’ Clichés","pub":"New York Times","date":"02.04.12","img":"Screen Shot 2013-11-13 at 12.43.07 AM"},
{"Link":"http://cityroom.blogs.nytimes.com/2011/10/24/for-quiet-moments-between-protests-a-growing-library/?scp=5&sq=%22ritchie%20s.%20king%22&st=cse","Category":"writing","hed":"For Quiet Moments Between Protests, a Growing Library","pub":"New York Times","date":"10.24.11","img":"Screen Shot 2013-11-13 at 12.44.32 AM"},
{"Link":"http://spectrum.ieee.org/telecom/internet/building-a-subversive-grassroots-network","Category":"writing","hed":"Building a subversive grassroots network","pub":"IEEE Spectrum","date":"06.11.13","img":"Screen Shot 2013-11-13 at 12.54.28 AM"},
{"Link":"http://qz.com/15321/inside-the-epic-all-night-goldman-sachs-scavenger-hunt/","Category":"diagrams","hed":"Inside the epic, all-night, Goldman Sachs scavenger hunt","pub":"Quartz","date":"06.27.13","img":"Screen Shot 2013-11-13 at 12.58.00 AM"}];

var container = d3.select("#gallery-container");

var side = 60;

hed = d3.select("#story-hed")
pub = d3.select("#story-pub")
date = d3.select("#story-date")

var interactives = data.filter(function(d) { return d.Category == "interactives"; }),
	maps = data.filter(function(d) { return d.Category == "maps"; }),
	charts = data.filter(function(d) { return d.Category == "charts"; }),
	writing = data.filter(function(d) { return d.Category == "writing"; }),
	diagrams = data.filter(function(d) { return d.Category == "diagrams"; });

// INTERACTIVES

var interactivesLabel = container.append("div")
	.attr("class","box-div")
	.append("svg").attr("width",side).attr("height",side)

interactivesLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2-10)
	.attr("text-anchor","middle")
	.text("inter-")
	.attr("class","cat-labels")

interactivesLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2+2)
	.attr("text-anchor","middle")
	.text("actives")
	.attr("class","cat-labels")

interactivesLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2+14)
	.attr("text-anchor","middle")
	.text("▶")
	.attr("class","cat-labels")

container.selectAll(".interactives")
	.data(interactives)
  .enter().append("div")
  	.attr("class","box-div img-div")
  	.html(function(d) { 
  		return "<a href='" + d.Link + "'><svg><image xlink:href='imgs/" + d.img + ".jpg' x='0' y='0' width='" + side + "px' height='" + side + "px'/><rect x='0' y='0' width='" + side + "px' height='" + side + "px' fill='#FF4CF4' opacity='0'</svg></a>" ; 
  	})
  	.on("mouseover", function(d) {

  		selected = d3.select(".selected")

  		if (selected[0][0]) {
  			
  			selected.transition()
  				.attr("opacity", 0)

  			selected.classed("selected",false)

  		};

  		rect = d3.select(this).select("rect")
  			.classed("selected",true)

  		rect.transition()
  			.attr("opacity",0.5)
  			

  		hed.text(d.hed)
  		pub.text(d.pub)
  		date.text(d.date)
  	})


// MAPS

var mapsLabel = container.append("div")
	.attr("class","box-div")
	.append("svg").attr("width",side).attr("height",side)

mapsLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2-5)
	.attr("text-anchor","middle")
	.text("maps")
	.attr("class","cat-labels")

mapsLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2+9)
	.attr("text-anchor","middle")
	.text("▶")
	.attr("class","cat-labels")

container.selectAll(".maps")
	.data(maps)
  .enter().append("div")
  	.attr("class","box-div img-div")
  	.html(function(d) { 
  		return "<a href='" + d.Link + "'><svg><image xlink:href='imgs/" + d.img + ".jpg' x='0' y='0' width='" + side + "px' height='" + side + "px'/><rect x='0' y='0' width='" + side + "px' height='" + side + "px' fill='#FF4CF4' opacity='0'</svg></a>" ; 
  	})
  	.on("mouseover", function(d) {

  		selected = d3.select(".selected")

  		if (selected[0][0]) {
  			
  			selected.attr("opacity", 0)

  			selected.classed("selected",false)

  		};

  		rect = d3.select(this).select("rect")
  			.classed("selected",true)

  		rect.attr("opacity",0.5)
  			

  		hed.text(d.hed)
  		pub.text(d.pub)
  		date.text(d.date)
  	})


// CHARTS

var chartsLabel = container.append("div")
	.attr("class","box-div")
	.append("svg").attr("width",side).attr("height",side)

chartsLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2-5)
	.attr("text-anchor","middle")
	.text("charts")
	.attr("class","cat-labels")

chartsLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2+9)
	.attr("text-anchor","middle")
	.text("▶")
	.attr("class","cat-labels")

container.selectAll(".charts")
	.data(charts)
  .enter().append("div")
  	.attr("class","box-div img-div")
  	.html(function(d) { 
  		return "<a href='" + d.Link + "'><svg><image xlink:href='imgs/" + d.img + ".jpg' x='0' y='0' width='" + side + "px' height='" + side + "px'/><rect x='0' y='0' width='" + side + "px' height='" + side + "px' fill='#FF4CF4' opacity='0'</svg></a>" ; 
  	})
  	.on("mouseover", function(d) {

  		selected = d3.select(".selected")

  		if (selected[0][0]) {
  			
  			selected.attr("opacity", 0)

  			selected.classed("selected",false)

  		};

  		rect = d3.select(this).select("rect")
  			.classed("selected",true)

  		rect.attr("opacity",0.5)
  			

  		hed.text(d.hed)
  		pub.text(d.pub)
  		date.text(d.date)
  	})


// DIAGRAMS

var diagramsLabel = container.append("div")
	.attr("class","box-div")
	.append("svg").attr("width",side).attr("height",side)

diagramsLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2-5)
	.attr("text-anchor","middle")
	.text("diagrams")
	.attr("class","cat-labels")

diagramsLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2+9)
	.attr("text-anchor","middle")
	.text("▶")
	.attr("class","cat-labels")

container.selectAll(".diagrams")
	.data(diagrams)
  .enter().append("div")
  	.attr("class","box-div img-div")
  	.html(function(d) { 
  		return "<a href='" + d.Link + "'><svg><image xlink:href='imgs/" + d.img + ".jpg' x='0' y='0' width='" + side + "px' height='" + side + "px'/><rect x='0' y='0' width='" + side + "px' height='" + side + "px' fill='#FF4CF4' opacity='0'</svg></a>" ; 
  	})
  	.on("mouseover", function(d) {

  		selected = d3.select(".selected")

  		if (selected[0][0]) {
  			
  			selected.transition()
  				.attr("opacity", 0)

  			selected.classed("selected",false)

  		};

  		rect = d3.select(this).select("rect")
  			.classed("selected",true)

  		rect.transition()
  			.attr("opacity",0.5)
  			

  		hed.text(d.hed)
  		pub.text(d.pub)
  		date.text(d.date)
  	})


// WRITING

var writingLabel = container.append("div")
	.attr("class","box-div")
	.append("svg").attr("width",side).attr("height",side)

writingLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2-5)
	.attr("text-anchor","middle")
	.text("writing")
	.attr("class","cat-labels")

writingLabel.append("text")
	.attr("x",side/2)
	.attr("y",side/2+9)
	.attr("text-anchor","middle")
	.text("▶")
	.attr("class","cat-labels")

container.selectAll(".writing")
	.data(writing)
  .enter().append("div")
  	.attr("class","box-div img-div")
  	.html(function(d) { 
  		return "<a href='" + d.Link + "'><svg><image xlink:href='imgs/" + d.img + ".jpg' x='0' y='0' width='" + side + "px' height='" + side + "px'/><rect x='0' y='0' width='" + side + "px' height='" + side + "px' fill='#FF4CF4' opacity='0'</svg></a>" ; 
  	})
  	.on("mouseover", function(d) {

  		selected = d3.select(".selected")

  		if (selected[0][0]) {
  			
  			selected.transition()
  				.attr("opacity", 0)

  			selected.classed("selected",false)

  		};

  		rect = d3.select(this).select("rect")
  			.classed("selected",true)

  		rect.transition()
  			.attr("opacity",0.5)
  			

  		hed.text(d.hed)
  		pub.text(d.pub)
  		date.text(d.date)
  	})
















